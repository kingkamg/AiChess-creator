{"version":3,"sources":["../../../../assets/scripts/assets/scripts/GameBoard.js"],"names":["Constant","require","cc","Class","extends","Component","properties","piecesAtlas","default","type","SpriteAtlas","piecePrefab","Prefab","onLoad","node","on","Node","EventType","TOUCH_START","e","pos","convertToNodeSpaceAR","getLocation","row","Math","floor","y","left_bottom_pos","len_y","cell_size","col","x","len_x","put_piece_at","bind","piece","createPieceByName","setPosition","addChild","pieceName","instantiate","getComponent","Sprite","spriteFrame","getSpriteFrame","start"],"mappings":";;;;;;AAAA,IAAIA,WAAWC,QAAQ,eAAR,CAAf;;AAEA;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;;AAER;AACAC,qBAAa;AACTC,qBAAS,IADA;AAETC,kBAAMP,GAAGQ;AAFA,SAHL;;AAQR;AACAC,qBAAY;AACRH,qBAAS,IADD;AAERC,kBAAMP,GAAGU;AAFD;AATJ,KAHP;;AAkBL;AACAC,UAnBK,oBAmBK;;AAEN,aAAKC,IAAL,CAAUC,EAAV,CAAab,GAAGc,IAAH,CAAQC,SAAR,CAAkBC,WAA/B,EAA4C,UAASC,CAAT,EAAW;;AAEnD,gBAAIC,MAAM,KAAKN,IAAL,CAAUO,oBAAV,CAA+BF,EAAEG,WAAF,EAA/B,CAAV;;AAEA,gBAAIC,MAAMC,KAAKC,KAAL,CAAY,CAACL,IAAIM,CAAJ,GAAQ1B,SAAS2B,eAAT,CAAyBC,KAAjC,GAAyC5B,SAAS6B,SAAT,GAAmB,GAA7D,IAAoE7B,SAAS6B,SAAzF,CAAV;AACA,gBAAIC,MAAMN,KAAKC,KAAL,CAAY,CAACL,IAAIW,CAAJ,GAAQ/B,SAAS2B,eAAT,CAAyBK,KAAjC,GAAyChC,SAAS6B,SAAT,GAAmB,GAA7D,IAAoE7B,SAAS6B,SAAzF,CAAV;;AAEA;AACA,gBAAGN,MAAM,CAAN,IAAWA,MAAM,CAAjB,IAAsBO,MAAM,CAA5B,IAAiCA,MAAM,CAA1C,EAA4C;AACxC;AACH,aAFD,MAEK;AACD,qBAAKG,YAAL,CAAkBV,GAAlB,EAAuBO,GAAvB;AACH;AAEJ,SAd2C,CAc1CI,IAd0C,CAcrC,IAdqC,CAA5C,EAcc,IAdd;AAeH,KApCI;;;AAsCLD,kBAAc,sBAASV,GAAT,EAAcO,GAAd,EAAmB;;AAE7B,YAAIC,IAAKD,MAAM9B,SAAS6B,SAAf,GAA2B7B,SAAS2B,eAAT,CAAyBK,KAA7D;AACA,YAAIN,IAAKH,MAAMvB,SAAS6B,SAAf,GAA2B7B,SAAS2B,eAAT,CAAyBC,KAA7D;;AAGA,YAAIO,QAAQ,KAAKC,iBAAL,CAAuB,WAAvB,CAAZ;AACAD,cAAME,WAAN,CAAkBN,CAAlB,EAAqBL,CAArB;AACA,aAAKZ,IAAL,CAAUwB,QAAV,CAAmBH,KAAnB;AAEH,KAhDI;;AAkDLC,uBAAmB,2BAASG,SAAT,EAAmB;AAClC,YAAIJ,QAAQjC,GAAGsC,WAAH,CAAe,KAAK7B,WAApB,CAAZ;AACAwB,cAAMM,YAAN,CAAmBvC,GAAGwC,MAAtB,EAA8BC,WAA9B,GAA4C,KAAKpC,WAAL,CAAiBqC,cAAjB,CAAgCL,SAAhC,CAA5C;AACA,eAAOJ,KAAP;AACH,KAtDI;;AAwDLU,SAxDK,mBAwDI,CAER;AA1DI;;AA4DL;AA5DJ","file":"GameBoard.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["var Constant = require('./Constant.js');\n\n//\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        \n        //图集资源，用于初始化棋子prefab\n        piecesAtlas: {\n            default: null,\n            type: cc.SpriteAtlas\n        },\n\n        //棋子prefab\n        piecePrefab:{\n            default: null,\n            type: cc.Prefab\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n    onLoad () {\n\n        this.node.on(cc.Node.EventType.TOUCH_START, function(e){\n\n            var pos = this.node.convertToNodeSpaceAR(e.getLocation());\n           \n            var row = Math.floor( (pos.y + Constant.left_bottom_pos.len_y + Constant.cell_size*0.5) / Constant.cell_size);\n            var col = Math.floor( (pos.x + Constant.left_bottom_pos.len_x + Constant.cell_size*0.5) / Constant.cell_size);\n        \n            //\n            if(row < 0 || row > 9 || col < 0 || col > 8){\n                return;\n            }else{\n                this.put_piece_at(row, col);\n            }\n\n        }.bind(this), this);\n    },\n\n    put_piece_at: function(row, col ){\n   \n        var x =  col * Constant.cell_size - Constant.left_bottom_pos.len_x\n        var y =  row * Constant.cell_size - Constant.left_bottom_pos.len_y;\n\n    \n        var piece = this.createPieceByName(\"black_shi\");\n        piece.setPosition(x, y);\n        this.node.addChild(piece);\n\n    },\n\n    createPieceByName: function(pieceName){\n        var piece = cc.instantiate(this.piecePrefab);\n        piece.getComponent(cc.Sprite).spriteFrame = this.piecesAtlas.getSpriteFrame(pieceName);\n        return piece;\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n});\n"]}