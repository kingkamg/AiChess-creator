{"version":3,"sources":["MoveRule.js"],"names":["Constant","require","get_stone_num_between_row_col","game_board_info","from_row","from_col","to_row","to_col","count","began_col","end_col","i","piecesArrArr","began_row","end_row","canMoveChe","row","col","canMoveMa","canMoveXiang","canMoveShi","canMovePao","m_cur_click_stone","num","m_row","m_col","console","log","stone","canMoveBing","canMoveJiang","canMove","m_stone_type","stone_type","che","ma","xiang","shi","pao","bing","jiang","module","exports"],"mappings":"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","file":"MoveRule.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["/**\n * 移动规则\n */\nvar Constant = require(\"./Constant.js\");\n\n//-----------------私有的工具函数\nvar get_stone_num_between_row_col = function(game_board_info, from_row, from_col, to_row, to_col){\n    var count = 0;\n\n    //\n    if(from_row === to_row){\n\n        var began_col = from_col;\n        var end_col = to_col;\n\n        if(from_col > to_col){\n            began_col = to_col;\n            end_col = from_col;\n        }\n\n        //\n        for(var i = began_col+1; i <= end_col-1; i++){\n            if(game_board_info.piecesArrArr[from_row][i]){\n                count++;\n            }\n        }\n        \n    }\n    //\n    else if(from_col === to_col){\n        var began_row = from_row;\n        var end_row = to_row;\n\n        if(from_row > to_row){\n            began_row = to_row;\n            end_row = from_row;\n        }\n\n        //\n        for(var i = began_row+1; i <= end_row-1; i++){\n            if(game_board_info.piecesArrArr[i][from_col]){\n                count++;\n            }\n        }\n    }\n\n    //\n    return count;\n}\n\n\n//车\nvar canMoveChe = function(game_board_info, row, col){\n\n\n}\n\n//马\nvar canMoveMa = function(game_board_info, row, col){\n\n}\n\n//象\nvar canMoveXiang = function(game_board_info, row, col){\n\n}\n\n//士\nvar canMoveShi = function(game_board_info, row, col){\n\n}\n\n//炮\nvar canMovePao = function(game_board_info, row, col){\n\n    //当前选中的棋子\n    var m_cur_click_stone = game_board_info.m_cur_click_stone;\n\n    //\n    var num = get_stone_num_between_row_col(game_board_info, m_cur_click_stone.m_row, m_cur_click_stone.m_col, row, col);\n\n    if(m_cur_click_stone.m_row === row || m_cur_click_stone.m_col === col){\n\n    }else{\n\n        console.log(\"-----移动炮必须满足在一条直线上\");\n        return false;\n    }\n\n    //仅仅移动(包括横和竖),则移动到的row col不能有子\n    if(num == 0){\n        var stone = game_board_info.piecesArrArr[row][col];\n        if(!stone){\n            return true;\n        }else{\n            console.log(\"-----仅仅移动的话，不可以移动到有子的地方\");\n            return false;\n        }\n    }\n    //吃一个子\n    else if(num == 1){\n\n        var stone = game_board_info.piecesArrArr[row][col];\n        if(stone){\n            return true;\n        }else{\n\n            console.log(\"-----间山打子的话，必须有一个子\");\n            return false;\n        }\n        \n    }\n    \n    console.log(\"-----其它不满足移动炮的情况\");\n\n    return false;\n}\n\n//兵\nvar canMoveBing = function(game_board_info, row, col){\n\n}\n\n//将\nvar canMoveJiang = function(game_board_info, row, col){\n\n}\n\n\n//\nvar canMove = function(game_board_info, row, col){\n    var m_cur_click_stone = game_board_info.m_cur_click_stone;\n\n    console.log(\"m_cur_click_stone.m_stone_type:\" + m_cur_click_stone.m_stone_type);\n\n    //\n    switch(m_cur_click_stone.m_stone_type){\n\n        //车\n        case Constant.stone_type.che:\n            return canMoveChe(game_board_info, row, col);\n\n        //马\n        case Constant.stone_type.ma:\n            return canMoveMa(game_board_info, row, col);\n\n        //象\n        case Constant.stone_type.xiang:\n            return canMoveXiang(game_board_info, row, col);\n\n        //士\n        case Constant.stone_type.shi:\n            return canMoveShi(game_board_info, row, col);\n\n        //炮\n        case Constant.stone_type.pao:\n            return canMovePao(game_board_info, row, col);\n\n        //兵\n        case Constant.stone_type.bing:\n            return canMoveBing(game_board_info, row, col);\n\n        //将\n        case Constant.stone_type.jiang:\n            return canMoveJiang(game_board_info, row, col);\n\n        default:\n            return false;\n    }\n\n    return false;\n}\n\n//导出规则表\nmodule.exports = {\n    canMove:        canMove\n}"]}